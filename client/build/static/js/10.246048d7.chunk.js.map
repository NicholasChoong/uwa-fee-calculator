{"version":3,"sources":["components/FeeCalculator/FeeCourseAndYear/index.js"],"names":["FeeCourseAndYear","props","data","updateData","courseList","startYearList","updateFee","prevPage","updatePage","page","updateUnitList","updateEstimatedFee","useFetch","request","response","loading","error","useState","courseCode","year","label","majorCode","selection","setSelection","courseName","setCourseName","majorList","setMajorList","pressed","setPressed","loadUnits","useCallback","a","post","feeYear","unitsData","console","ok","newUnitList","Object","entries","map","value","loadMajorFee","majorFeeData","newMajorFee","course_name","loadMajor","course","majorData","newMajorList","loadFee","feeData","fee","feeCategory","PAGES","FEE_PAYING_SUMMARY","STUDY_ABOARD_SUMMARY","loadData","Promise","all","D_SUMMARY","style","textAlign","fontWeight","width","margin","onSubmit","event","preventDefault","htmlFor","className","name","inputId","options","isClearable","placeholder","onChange","prev","defaultValue","isLoading","isDisabled","overflow","id","type","onClick","disabled","COURSE_AND_YEAR"],"mappings":"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","file":"static/js/10.246048d7.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react'\r\nimport { useFetch } from 'use-http'\r\nimport Select from 'react-select'\r\nimport PAGES from '../../../libs/pageEnum'\r\n\r\nconst FeeCourseAndYear = props => {\r\n  const {\r\n    data,\r\n    updateData,\r\n    courseList,\r\n    startYearList,\r\n    updateFee,\r\n    prevPage,\r\n    updatePage,\r\n    page,\r\n    updateUnitList,\r\n    updateEstimatedFee\r\n  } = props\r\n  const [request, response, loading, error] = useFetch()\r\n  const [selection, setSelection] = useState({\r\n    ...data,\r\n    courseCode: '',\r\n    year: startYearList?.[0]?.label,\r\n    majorCode: ''\r\n  })\r\n  const [courseName, setCourseName] = useState('')\r\n  const [majorList, setMajorList] = useState([])\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const loadUnits = useCallback(async () => {\r\n    const unitsData = await request.post('/Calculator/GetUnitsForMajor', {\r\n      majorCode: 'all',\r\n      feeYear: selection.feeYear\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newUnitList = Object.entries(unitsData[0]).map(\r\n        ([unitCode, unitName]) => ({\r\n          value: unitCode,\r\n          label: unitName\r\n        })\r\n      )\r\n      updateUnitList(newUnitList)\r\n    }\r\n  }, [request, response, error, selection, updateUnitList])\r\n\r\n  const loadMajorFee = useCallback(async () => {\r\n    const majorFeeData = await request.post('/Calculator/GetFeeForMajor', {\r\n      ...selection,\r\n      majorCode: 'all'\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newMajorFee = {\r\n        ...majorFeeData[0],\r\n        course_name: courseName\r\n      }\r\n      updateEstimatedFee(newMajorFee)\r\n    }\r\n  }, [request, response, error, selection, courseName, updateEstimatedFee])\r\n\r\n  const loadMajor = useCallback(\r\n    async courseCode => {\r\n      const majorData = await request.post('/Calculator/GetMajorsForCourse', {\r\n        course: courseCode\r\n      })\r\n      if (error) console.error(error)\r\n      if (response.ok) {\r\n        const newMajorList = Object.entries(majorData[0]).map(\r\n          ([majorCode, majorName]) => ({\r\n            value: majorCode,\r\n            label: majorName\r\n          })\r\n        )\r\n        setMajorList(newMajorList)\r\n      }\r\n    },\r\n    [request, response, error, setMajorList]\r\n  )\r\n\r\n  const loadFee = useCallback(async () => {\r\n    const feeData = await request.post('/Calculator/GetCourseFee', selection)\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const fee = feeData[0]\r\n      updateFee(fee)\r\n      if (selection.feeCategory !== 'INTSA') {\r\n        updatePage(PAGES.FEE_PAYING_SUMMARY)\r\n      } else {\r\n        updatePage(PAGES.STUDY_ABOARD_SUMMARY)\r\n      }\r\n    }\r\n  }, [request, response, error, selection, updateFee, updatePage])\r\n\r\n  const loadData = async () => {\r\n    await Promise.all([loadMajorFee(), loadUnits()])\r\n    updatePage(PAGES.D_SUMMARY)\r\n  }\r\n\r\n  const changeCourseHandler = event => {\r\n    setSelection(prev => ({ ...prev, courseCode: event?.value }))\r\n    setPressed(false)\r\n    setCourseName(event?.label)\r\n    if (event?.value) {\r\n      loadMajor(event.value)\r\n    }\r\n  }\r\n\r\n  const changeYearHandler = event => {\r\n    setSelection(prev => ({ ...prev, year: `Starting ${event?.value}` }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const changeMajorHandler = event => {\r\n    setSelection(prev => ({ ...prev, majorCode: event?.value }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const submitHandler = event => {\r\n    event.preventDefault()\r\n    setPressed(true)\r\n    updateData({ ...selection, majorCode: '' })\r\n    if (selection.feeCategory[0] !== 'D' || selection.feeCategory === 'DFPG') {\r\n      loadFee()\r\n    } else {\r\n      loadData()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1 style={{ fontWeight: 'bold' }}>Select Your Info:</h1>\r\n      <br />\r\n      <p>Select your course and starting year</p>\r\n      <p>Click &quot;Help&quot; for descriptions.</p>\r\n      <hr style={{ width: '50%', margin: 'auto' }} />\r\n      <br />\r\n      <br />\r\n      {error && 'Error!'}\r\n      {loading && 'Loading...'}\r\n      <form onSubmit={submitHandler}>\r\n        <label htmlFor='course'>Select Your Course:</label>\r\n        <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n          <Select\r\n            name='course'\r\n            inputId='course'\r\n            options={courseList}\r\n            isClearable\r\n            placeholder={`eg. ${courseList?.[0]?.label}`}\r\n            onChange={changeCourseHandler}\r\n          />\r\n        </div>\r\n        <br />\r\n        <label htmlFor='startyear'>Select Your Starting Year:</label>\r\n        <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n          <Select\r\n            name='startyear'\r\n            inputId='startyear'\r\n            options={startYearList}\r\n            isClearable\r\n            placeholder='Choose your starting year'\r\n            defaultValue={startYearList?.[0]}\r\n            onChange={changeYearHandler}\r\n          />\r\n        </div>\r\n        <br />\r\n        {data.feeCategory === 'DUG' && (\r\n          <>\r\n            <label htmlFor='majorSelect'>Select Your Major:</label>\r\n            <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n              <Select\r\n                name='majorSelect'\r\n                inputId='majorSelect'\r\n                options={majorList}\r\n                isClearable\r\n                placeholder={\r\n                  majorList?.[0]?.label\r\n                    ? `eg. ${majorList?.[0]?.label}`\r\n                    : 'Please select your course first'\r\n                }\r\n                isLoading={loading}\r\n                isDisabled={loading || !selection.courseCode}\r\n                onChange={changeMajorHandler}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <br />\r\n        <br />\r\n        <div style={{ overflow: 'auto' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <button\r\n              id='prevBtn'\r\n              type='button'\r\n              onClick={prevPage}\r\n              disabled={pressed || page !== PAGES.COURSE_AND_YEAR}\r\n            >\r\n              Previous\r\n            </button>\r\n            <button\r\n              id='nextBtn'\r\n              disabled={\r\n                pressed ||\r\n                page !== PAGES.COURSE_AND_YEAR ||\r\n                loading ||\r\n                (data.feeCategory !== 'DUG'\r\n                  ? !selection.courseCode || !selection.year\r\n                  : !selection.majorCode)\r\n              }\r\n              type='submit'\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeeCourseAndYear\r\n"],"sourceRoot":""}