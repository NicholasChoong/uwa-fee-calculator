{"version":3,"sources":["components/FeeCalculator/FeeCourseAndYear/index.js"],"names":["FeeCourseAndYear","props","data","updateData","courseList","startYearList","updateFee","prevPage","updatePage","updateUnitList","updateEstimatedFee","useFetch","request","response","loading","error","useState","courseCode","year","label","majorCode","selection","setSelection","courseName","setCourseName","majorList","setMajorList","loadUnits","useCallback","a","post","feeYear","unitsData","console","ok","newUnitList","Object","entries","map","value","loadMajorFee","majorFeeData","newMajorFee","course_name","loadMajor","course","majorData","newMajorList","loadFee","feeData","fee","feeCategory","PAGES","FEE_PAYING_SUMMARY","STUDY_ABOARD_SUMMARY","loadData","Promise","all","D_SUMMARY","style","textAlign","fontWeight","width","margin","onSubmit","event","preventDefault","htmlFor","className","name","inputId","options","isClearable","placeholder","onChange","prev","defaultValue","isLoading","isDisabled","overflow","id","type","onClick","disabled"],"mappings":"oMA8MeA,UAzMU,SAAAC,GAAU,IAAD,QAE9BC,EASED,EATFC,KACAC,EAQEF,EARFE,WACAC,EAOEH,EAPFG,WACAC,EAMEJ,EANFI,cACAC,EAKEL,EALFK,UACAC,EAIEN,EAJFM,SACAC,EAGEP,EAHFO,WACAC,EAEER,EAFFQ,eACAC,EACET,EADFS,mBAEF,EAA4CC,cAA5C,mBAAOC,EAAP,KAAgBC,EAAhB,KAA0BC,EAA1B,KAAmCC,EAAnC,KACA,EAAkCC,mBAAS,2BACtCd,GADqC,IAExCe,WAAY,GACZC,KAAI,OAAEb,QAAF,IAAEA,GAAF,UAAEA,EAAgB,UAAlB,aAAE,EAAoBc,MAC1BC,UAAW,MAJb,mBAAOC,EAAP,KAAkBC,EAAlB,KAMA,EAAoCN,mBAAS,IAA7C,mBAAOO,EAAP,KAAmBC,EAAnB,KACA,EAAkCR,mBAAS,IAA3C,mBAAOS,EAAP,KAAkBC,EAAlB,KAEMC,EAAYC,sBAAW,sBAAC,8BAAAC,EAAA,sEACJjB,EAAQkB,KAAK,+BAAgC,CACnEV,UAAW,MACXW,QAASV,EAAUU,UAHO,OACtBC,EADsB,OAKxBjB,GAAOkB,QAAQlB,MAAMA,GACrBF,EAASqB,KACLC,EAAcC,OAAOC,QAAQL,EAAU,IAAIM,KAC/C,yCAA2B,CACzBC,MADF,KAEEpB,MAFF,SAKFV,EAAe0B,IAbW,2CAe3B,CAACvB,EAASC,EAAUE,EAAOM,EAAWZ,IAEnC+B,EAAeZ,sBAAW,sBAAC,8BAAAC,EAAA,sEACJjB,EAAQkB,KAAK,6BAAb,2BACtBT,GADsB,IAEzBD,UAAW,SAHkB,OACzBqB,EADyB,OAK3B1B,GAAOkB,QAAQlB,MAAMA,GACrBF,EAASqB,KACLQ,EADS,2BAEVD,EAAa,IAFH,IAGbE,YAAapB,IAEfb,EAAmBgC,IAXU,2CAa9B,CAAC9B,EAASC,EAAUE,EAAOM,EAAWE,EAAYb,IAE/CkC,EAAYhB,sBAAW,uCAC3B,WAAMX,GAAN,iBAAAY,EAAA,sEAC0BjB,EAAQkB,KAAK,iCAAkC,CACrEe,OAAQ5B,IAFZ,OACQ6B,EADR,OAIM/B,GAAOkB,QAAQlB,MAAMA,GACrBF,EAASqB,KACLa,EAAeX,OAAOC,QAAQS,EAAU,IAAIR,KAChD,yCAA6B,CAC3BC,MADF,KAEEpB,MAFF,SAKFO,EAAaqB,IAZjB,2CAD2B,sDAgB3B,CAACnC,EAASC,EAAUE,EAAOW,IAGvBsB,EAAUpB,sBAAW,sBAAC,8BAAAC,EAAA,sEACJjB,EAAQkB,KAAK,2BAA4BT,GADrC,OACpB4B,EADoB,OAEtBlC,GAAOkB,QAAQlB,MAAMA,GACrBF,EAASqB,KACLgB,EAAMD,EAAQ,GACpB3C,EAAU4C,GACoB,UAA1B7B,EAAU8B,YACZ3C,EAAW4C,IAAMC,oBAEjB7C,EAAW4C,IAAME,uBATK,2CAYzB,CAAC1C,EAASC,EAAUE,EAAOM,EAAWf,EAAWE,IAE9C+C,EAAQ,uCAAG,sBAAA1B,EAAA,sEACT2B,QAAQC,IAAI,CAACjB,IAAgBb,MADpB,OAEfnB,EAAW4C,IAAMM,WAFF,2CAAH,qDA+Bd,OACE,sBAAKC,MAAO,CAAEC,UAAW,UAAzB,UACE,oBAAID,MAAO,CAAEE,WAAY,QAAzB,+BACA,uBACA,qEACA,+DACA,oBAAIF,MAAO,CAAEG,MAAO,MAAOC,OAAQ,UACnC,uBACA,uBACChD,GAAS,SACTD,GAAW,aACZ,uBAAMkD,SArBY,SAAAC,GACpBA,EAAMC,iBACN/D,EAAW,2BAAKkB,GAAN,IAAiBD,UAAW,MACL,MAA7BC,EAAU8B,YAAY,IAAwC,SAA1B9B,EAAU8B,YAChDH,IAEAO,KAeA,UACE,uBAAOY,QAAQ,SAAf,iCACA,qBAAKC,UAAU,MAAMT,MAAO,CAAEG,MAAO,MAAOC,OAAQ,QAApD,SACE,cAAC,IAAD,CACEM,KAAK,SACLC,QAAQ,SACRC,QAASnE,EACToE,aAAW,EACXC,YAAW,qBAASrE,QAAT,IAASA,GAAT,UAASA,EAAa,UAAtB,aAAS,EAAiBe,OACrCuD,SA9CkB,SAAAT,GAC1B3C,GAAa,SAAAqD,GAAI,kCAAUA,GAAV,IAAgB1D,WAAU,OAAEgD,QAAF,IAAEA,OAAF,EAAEA,EAAO1B,WACpDf,EAAa,OAACyC,QAAD,IAACA,OAAD,EAACA,EAAO9C,QACrB,OAAI8C,QAAJ,IAAIA,OAAJ,EAAIA,EAAO1B,QACTK,EAAUqB,EAAM1B,YA6Cd,uBACA,uBAAO4B,QAAQ,YAAf,wCACA,qBAAKC,UAAU,MAAMT,MAAO,CAAEG,MAAO,MAAOC,OAAQ,QAApD,SACE,cAAC,IAAD,CACEM,KAAK,YACLC,QAAQ,YACRC,QAASlE,EACTmE,aAAW,EACXC,YAAY,4BACZG,aAAY,OAAEvE,QAAF,IAAEA,OAAF,EAAEA,EAAgB,GAC9BqE,SAnDgB,SAAAT,GACxB3C,GAAa,SAAAqD,GAAI,kCAAUA,GAAV,IAAgBzD,KAAK,YAAD,cAAc+C,QAAd,IAAcA,OAAd,EAAcA,EAAO1B,iBAqDtD,uBACsB,QAArBrC,EAAKiD,aACJ,qCACE,uBAAOgB,QAAQ,cAAf,gCACA,qBAAKC,UAAU,MAAMT,MAAO,CAAEG,MAAO,MAAOC,OAAQ,QAApD,SACE,cAAC,IAAD,CACEM,KAAK,cACLC,QAAQ,cACRC,QAAS9C,EACT+C,aAAW,EACXC,aACW,OAAThD,QAAS,IAATA,GAAA,UAAAA,EAAY,UAAZ,eAAgBN,OAAhB,qBACWM,QADX,IACWA,GADX,UACWA,EAAY,UADvB,aACW,EAAgBN,OACvB,kCAEN0D,UAAW/D,EACXgE,WAAYhE,IAAYO,EAAUJ,WAClCyD,SAnEa,SAAAT,GACzB3C,GAAa,SAAAqD,GAAI,kCAAUA,GAAV,IAAgBvD,UAAS,OAAE6C,QAAF,IAAEA,OAAF,EAAEA,EAAO1B,mBAuE/C,uBACA,uBACA,qBAAKoB,MAAO,CAAEoB,SAAU,QAAxB,SACE,sBAAKpB,MAAO,CAAEC,UAAW,UAAzB,UACE,wBAAQoB,GAAG,UAAUC,KAAK,SAASC,QAAS3E,EAA5C,sBAGA,wBACEyE,GAAG,UACHG,SACuB,QAArBjF,EAAKiD,aACA9B,EAAUJ,aAAeI,EAAUH,MACnCG,EAAUD,UAEjB6D,KAAK,SAPP","file":"static/js/10.c989c66b.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react'\r\nimport { useFetch } from 'use-http'\r\nimport Select from 'react-select'\r\nimport PAGES from '../../../libs/pageEnum'\r\n\r\nconst FeeCourseAndYear = props => {\r\n  const {\r\n    data,\r\n    updateData,\r\n    courseList,\r\n    startYearList,\r\n    updateFee,\r\n    prevPage,\r\n    updatePage,\r\n    updateUnitList,\r\n    updateEstimatedFee\r\n  } = props\r\n  const [request, response, loading, error] = useFetch()\r\n  const [selection, setSelection] = useState({\r\n    ...data,\r\n    courseCode: '',\r\n    year: startYearList?.[0]?.label,\r\n    majorCode: ''\r\n  })\r\n  const [courseName, setCourseName] = useState('')\r\n  const [majorList, setMajorList] = useState([])\r\n\r\n  const loadUnits = useCallback(async () => {\r\n    const unitsData = await request.post('/Calculator/GetUnitsForMajor', {\r\n      majorCode: 'all',\r\n      feeYear: selection.feeYear\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newUnitList = Object.entries(unitsData[0]).map(\r\n        ([unitCode, unitName]) => ({\r\n          value: unitCode,\r\n          label: unitName\r\n        })\r\n      )\r\n      updateUnitList(newUnitList)\r\n    }\r\n  }, [request, response, error, selection, updateUnitList])\r\n\r\n  const loadMajorFee = useCallback(async () => {\r\n    const majorFeeData = await request.post('/Calculator/GetFeeForMajor', {\r\n      ...selection,\r\n      majorCode: 'all'\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newMajorFee = {\r\n        ...majorFeeData[0],\r\n        course_name: courseName\r\n      }\r\n      updateEstimatedFee(newMajorFee)\r\n    }\r\n  }, [request, response, error, selection, courseName, updateEstimatedFee])\r\n\r\n  const loadMajor = useCallback(\r\n    async courseCode => {\r\n      const majorData = await request.post('/Calculator/GetMajorsForCourse', {\r\n        course: courseCode\r\n      })\r\n      if (error) console.error(error)\r\n      if (response.ok) {\r\n        const newMajorList = Object.entries(majorData[0]).map(\r\n          ([majorCode, majorName]) => ({\r\n            value: majorCode,\r\n            label: majorName\r\n          })\r\n        )\r\n        setMajorList(newMajorList)\r\n      }\r\n    },\r\n    [request, response, error, setMajorList]\r\n  )\r\n\r\n  const loadFee = useCallback(async () => {\r\n    const feeData = await request.post('/Calculator/GetCourseFee', selection)\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const fee = feeData[0]\r\n      updateFee(fee)\r\n      if (selection.feeCategory !== 'INTSA') {\r\n        updatePage(PAGES.FEE_PAYING_SUMMARY)\r\n      } else {\r\n        updatePage(PAGES.STUDY_ABOARD_SUMMARY)\r\n      }\r\n    }\r\n  }, [request, response, error, selection, updateFee, updatePage])\r\n\r\n  const loadData = async () => {\r\n    await Promise.all([loadMajorFee(), loadUnits()])\r\n    updatePage(PAGES.D_SUMMARY)\r\n  }\r\n\r\n  const changeCourseHandler = event => {\r\n    setSelection(prev => ({ ...prev, courseCode: event?.value }))\r\n    setCourseName(event?.label)\r\n    if (event?.value) {\r\n      loadMajor(event.value)\r\n    }\r\n  }\r\n\r\n  const changeYearHandler = event => {\r\n    setSelection(prev => ({ ...prev, year: `Starting ${event?.value}` }))\r\n  }\r\n\r\n  const changeMajorHandler = event => {\r\n    setSelection(prev => ({ ...prev, majorCode: event?.value }))\r\n  }\r\n\r\n  const submitHandler = event => {\r\n    event.preventDefault()\r\n    updateData({ ...selection, majorCode: '' })\r\n    if (selection.feeCategory[0] !== 'D' || selection.feeCategory === 'DFPG') {\r\n      loadFee()\r\n    } else {\r\n      loadData()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1 style={{ fontWeight: 'bold' }}>Select Your Info:</h1>\r\n      <br />\r\n      <p>Select your course and starting year</p>\r\n      <p>Click &quot;Help&quot; for descriptions.</p>\r\n      <hr style={{ width: '50%', margin: 'auto' }} />\r\n      <br />\r\n      <br />\r\n      {error && 'Error!'}\r\n      {loading && 'Loading...'}\r\n      <form onSubmit={submitHandler}>\r\n        <label htmlFor='course'>Select Your Course:</label>\r\n        <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n          <Select\r\n            name='course'\r\n            inputId='course'\r\n            options={courseList}\r\n            isClearable\r\n            placeholder={`eg. ${courseList?.[0]?.label}`}\r\n            onChange={changeCourseHandler}\r\n          />\r\n        </div>\r\n        <br />\r\n        <label htmlFor='startyear'>Select Your Starting Year:</label>\r\n        <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n          <Select\r\n            name='startyear'\r\n            inputId='startyear'\r\n            options={startYearList}\r\n            isClearable\r\n            placeholder='Choose your starting year'\r\n            defaultValue={startYearList?.[0]}\r\n            onChange={changeYearHandler}\r\n          />\r\n        </div>\r\n        <br />\r\n        {data.feeCategory === 'DUG' && (\r\n          <>\r\n            <label htmlFor='majorSelect'>Select Your Major:</label>\r\n            <div className='row' style={{ width: '25%', margin: 'auto' }}>\r\n              <Select\r\n                name='majorSelect'\r\n                inputId='majorSelect'\r\n                options={majorList}\r\n                isClearable\r\n                placeholder={\r\n                  majorList?.[0]?.label\r\n                    ? `eg. ${majorList?.[0]?.label}`\r\n                    : 'Please select your course first'\r\n                }\r\n                isLoading={loading}\r\n                isDisabled={loading || !selection.courseCode}\r\n                onChange={changeMajorHandler}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <br />\r\n        <br />\r\n        <div style={{ overflow: 'auto' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <button id='prevBtn' type='button' onClick={prevPage}>\r\n              Previous\r\n            </button>\r\n            <button\r\n              id='nextBtn'\r\n              disabled={\r\n                data.feeCategory !== 'DUG'\r\n                  ? !selection.courseCode || !selection.year\r\n                  : !selection.majorCode\r\n              }\r\n              type='submit'\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeeCourseAndYear\r\n"],"sourceRoot":""}