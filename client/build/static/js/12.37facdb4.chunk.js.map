{"version":3,"sources":["components/FeeCalculator/FeeCourseAndYear/index.js"],"names":["FeeCourseAndYear","props","data","updateData","courseList","startYearList","updateFee","prevPage","updatePage","page","updateUnitList","updateEstimatedFee","useFetch","request","response","loading","error","useState","courseCode","year","label","majorName","feeCategory","selection","setSelection","courseName","setCourseName","majorList","setMajorList","pressed","setPressed","loadUnits","useCallback","a","post","feeYear","unitsData","console","ok","newUnitList","Object","entries","map","value","loadMajorFee","majorCode","majorFeeData","newMajorFee","course_name","loadMajor","course","majorData","newMajorList","loadFee","feeData","fee","PAGES","FEE_PAYING_SUMMARY","STUDY_ABOARD_SUMMARY","loadData","Promise","all","D_SUMMARY","style","textAlign","fontWeight","width","margin","onSubmit","event","preventDefault","htmlFor","className","name","inputId","options","isClearable","placeholder","onChange","prev","isLoading","isDisabled","defaultValue","overflow","id","type","onClick","disabled","COURSE_AND_YEAR"],"mappings":"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","file":"static/js/12.37facdb4.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react'\r\nimport { useFetch } from 'use-http'\r\nimport Select from 'react-select'\r\nimport PAGES from '../../../libs/pageEnum'\r\n\r\nconst FeeCourseAndYear = props => {\r\n  const {\r\n    data,\r\n    updateData,\r\n    courseList,\r\n    startYearList,\r\n    updateFee,\r\n    prevPage,\r\n    updatePage,\r\n    page,\r\n    updateUnitList,\r\n    updateEstimatedFee\r\n  } = props\r\n  const [request, response, loading, error] = useFetch()\r\n  const [selection, setSelection] = useState({\r\n    ...data,\r\n    courseCode: '',\r\n    year: startYearList?.[0]?.label,\r\n    majorName: data.feeCategory !== 'DUG' ? 'All majors [all]' : ''\r\n  })\r\n  const [courseName, setCourseName] = useState('')\r\n  const [majorList, setMajorList] = useState([])\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const loadUnits = useCallback(async () => {\r\n    const unitsData = await request.post('/Calculator/GetUnitsForMajor', {\r\n      majorName: selection.majorName,\r\n      feeYear: selection.feeYear\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newUnitList = Object.entries(unitsData[0]).map(\r\n        ([unitCode, unitName]) => ({\r\n          value: unitCode,\r\n          label: unitName\r\n        })\r\n      )\r\n      updateUnitList(newUnitList)\r\n    }\r\n  }, [request, response, error, selection, updateUnitList])\r\n\r\n  const loadMajorFee = useCallback(async () => {\r\n    const majorFeeData = await request.post('/Calculator/GetFeeForMajor', {\r\n      ...selection,\r\n      majorCode: 'all'\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newMajorFee = {\r\n        ...majorFeeData[0],\r\n        course_name: courseName\r\n      }\r\n      updateEstimatedFee(newMajorFee)\r\n    }\r\n  }, [request, response, error, selection, courseName, updateEstimatedFee])\r\n\r\n  const loadMajor = useCallback(\r\n    async courseCode => {\r\n      const majorData = await request.post('/Calculator/GetMajorsForCourse', {\r\n        course: courseCode\r\n      })\r\n      if (error) console.error(error)\r\n      if (response.ok) {\r\n        const newMajorList = Object.entries(majorData[0]).map(\r\n          ([majorCode, majorName]) => ({\r\n            value: majorCode,\r\n            label: majorName + ` [${majorCode}]`\r\n          })\r\n        )\r\n        setMajorList(newMajorList)\r\n      }\r\n    },\r\n    [request, response, error, setMajorList]\r\n  )\r\n\r\n  const loadFee = useCallback(async () => {\r\n    const feeData = await request.post('/Calculator/GetCourseFee', selection)\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const fee = feeData[0]\r\n      updateFee(fee)\r\n      if (selection.feeCategory !== 'INTSA') {\r\n        updatePage(PAGES.FEE_PAYING_SUMMARY)\r\n      } else {\r\n        updatePage(PAGES.STUDY_ABOARD_SUMMARY)\r\n      }\r\n    }\r\n  }, [request, response, error, selection, updateFee, updatePage])\r\n\r\n  const loadData = async () => {\r\n    await Promise.all([loadMajorFee(), loadUnits()])\r\n    updatePage(PAGES.D_SUMMARY)\r\n  }\r\n\r\n  const changeCourseHandler = event => {\r\n    setSelection(prev => ({ ...prev, courseCode: event?.value }))\r\n    setPressed(false)\r\n    setCourseName(event?.label)\r\n    if (selection.feeCategory === 'DUG' && event?.value) {\r\n      loadMajor(event.value)\r\n    }\r\n  }\r\n\r\n  const changeYearHandler = event => {\r\n    setSelection(prev => ({ ...prev, year: `Starting ${event?.value}` }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const changeMajorHandler = event => {\r\n    setSelection(prev => ({ ...prev, majorName: event?.label }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const submitHandler = event => {\r\n    event.preventDefault()\r\n    setPressed(true)\r\n    updateData(selection)\r\n    if (selection.feeCategory[0] !== 'D' || selection.feeCategory === 'DFPG') {\r\n      loadFee()\r\n    } else {\r\n      loadData()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1 style={{ fontWeight: 'bold' }}>Select Your Info:</h1>\r\n      <br />\r\n      <p>Select your course and starting year</p>\r\n      <p>Click &quot;Help&quot; for descriptions.</p>\r\n      <hr style={{ width: '50%', margin: 'auto' }} />\r\n      <br />\r\n      <br />\r\n      {error && 'Error!'}\r\n      {loading && 'Loading...'}\r\n      <form onSubmit={submitHandler}>\r\n        <label htmlFor='course'>Select Your Course:</label>\r\n        <div className='row tbox'>\r\n          <Select\r\n            name='course'\r\n            inputId='course'\r\n            options={courseList}\r\n            isClearable\r\n            placeholder={`eg. ${courseList?.[0]?.label}`}\r\n            onChange={changeCourseHandler}\r\n            isLoading={pressed || loading}\r\n            isDisabled={pressed}\r\n          />\r\n        </div>\r\n        <br />\r\n        <label htmlFor='startyear'>Select Your Starting Year:</label>\r\n        <div className='row tbox'>\r\n          <Select\r\n            name='startyear'\r\n            inputId='startyear'\r\n            options={startYearList}\r\n            isClearable\r\n            placeholder='Choose your starting year'\r\n            defaultValue={startYearList?.[0]}\r\n            onChange={changeYearHandler}\r\n            isLoading={pressed || loading}\r\n            isDisabled={pressed}\r\n          />\r\n        </div>\r\n        <br />\r\n        {data.feeCategory === 'DUG' && (\r\n          <>\r\n            <label htmlFor='majorSelect'>Select Your Major:</label>\r\n            <div className='row tbox'>\r\n              <Select\r\n                name='majorSelect'\r\n                inputId='majorSelect'\r\n                options={majorList}\r\n                isClearable\r\n                placeholder={\r\n                  majorList?.[0]?.label\r\n                    ? `eg. ${majorList?.[0]?.label}`\r\n                    : 'Please select your course first'\r\n                }\r\n                isLoading={pressed || loading}\r\n                isDisabled={pressed || loading || !selection.courseCode}\r\n                onChange={changeMajorHandler}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <br />\r\n        <br />\r\n        <div style={{ overflow: 'auto' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <button\r\n              id='prevBtn'\r\n              type='button'\r\n              onClick={prevPage}\r\n              disabled={pressed || page !== PAGES.COURSE_AND_YEAR}\r\n            >\r\n              Previous\r\n            </button>\r\n            <button\r\n              id='nextBtn'\r\n              disabled={\r\n                pressed ||\r\n                page !== PAGES.COURSE_AND_YEAR ||\r\n                loading ||\r\n                (data.feeCategory !== 'DUG'\r\n                  ? !selection.courseCode || !selection.year\r\n                  : !selection.majorName)\r\n              }\r\n              type='submit'\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeeCourseAndYear\r\n"],"sourceRoot":""}