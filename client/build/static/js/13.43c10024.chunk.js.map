{"version":3,"sources":["components/FeeCalculator/FeeCourseAndYear/index.js"],"names":["FeeCourseAndYear","props","data","updateData","courseList","startYearList","updateStartYearList","updateFee","prevPage","updatePage","page","updateUnitList","updateEstimatedFee","useFetch","request","response","loading","error","useState","courseCode","year","majorName","feeCategory","selection","setSelection","courseName","setCourseName","majorList","setMajorList","pressed","setPressed","loadUnits","useCallback","a","post","feeYear","unitsData","console","ok","newUnitList","Object","entries","map","value","label","loadMajorFee","majorCode","majorFeeData","newMajorFee","course_name","loadMajor","course","majorData","newMajorList","loadStartingYears","startingYearData","newStartingYearList","reverse","loadFee","feeData","fee","PAGES","FEE_PAYING_SUMMARY","STUDY_ABOARD_SUMMARY","loadMajorAndStartingYears","Promise","all","loadMajorFeeAndUnits","D_SUMMARY","style","textAlign","fontWeight","width","margin","onSubmit","event","preventDefault","htmlFor","className","name","inputId","options","isClearable","placeholder","onChange","prev","isLoading","isDisabled","overflow","id","type","onClick","disabled","COURSE_AND_YEAR"],"mappings":"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","file":"static/js/13.43c10024.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react'\r\nimport { useFetch } from 'use-http'\r\nimport Select from 'react-select'\r\nimport PAGES from '../../../libs/pageEnum'\r\n\r\nconst FeeCourseAndYear = props => {\r\n  const {\r\n    data,\r\n    updateData,\r\n    courseList,\r\n    startYearList,\r\n    updateStartYearList,\r\n    updateFee,\r\n    prevPage,\r\n    updatePage,\r\n    page,\r\n    updateUnitList,\r\n    updateEstimatedFee\r\n  } = props\r\n  const [request, response, loading, error] = useFetch()\r\n  const [selection, setSelection] = useState({\r\n    ...data,\r\n    courseCode: '',\r\n    year: '',\r\n    majorName: data.feeCategory !== 'DUG' ? 'All majors [all]' : ''\r\n  })\r\n  const [courseName, setCourseName] = useState('')\r\n  const [majorList, setMajorList] = useState([])\r\n  const [pressed, setPressed] = useState(false)\r\n\r\n  const loadUnits = useCallback(async () => {\r\n    const unitsData = await request.post('/Calculator/GetUnitsForMajor', {\r\n      majorName: selection.majorName,\r\n      feeYear: selection.feeYear\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newUnitList = Object.entries(unitsData[0]).map(\r\n        ([unitCode, unitName]) => ({\r\n          value: unitCode,\r\n          label: unitName\r\n        })\r\n      )\r\n      updateUnitList(newUnitList)\r\n    }\r\n  }, [request, response, error, selection, updateUnitList])\r\n\r\n  const loadMajorFee = useCallback(async () => {\r\n    const majorFeeData = await request.post('/Calculator/GetFeeForMajor', {\r\n      ...selection,\r\n      majorCode: 'all'\r\n    })\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const newMajorFee = {\r\n        ...majorFeeData[0],\r\n        course_name: courseName\r\n      }\r\n      updateEstimatedFee(newMajorFee)\r\n    }\r\n  }, [request, response, error, selection, courseName, updateEstimatedFee])\r\n\r\n  const loadMajor = useCallback(\r\n    async courseCode => {\r\n      const majorData = await request.post('/Calculator/GetMajorsForCourse', {\r\n        course: courseCode\r\n      })\r\n      if (error) console.error(error)\r\n      if (response.ok) {\r\n        const newMajorList = Object.entries(majorData[0]).map(\r\n          ([majorCode, majorName]) => ({\r\n            value: majorCode,\r\n            label: majorName + ` [${majorCode}]`\r\n          })\r\n        )\r\n        setMajorList(newMajorList)\r\n      }\r\n    },\r\n    [request, response, error, setMajorList]\r\n  )\r\n\r\n  const loadStartingYears = useCallback(\r\n    async courseCode => {\r\n      const startingYearData = await request.post(\r\n        '/Calculator/getYearsForCourse',\r\n        {\r\n          ...selection,\r\n          courseCode: courseCode\r\n        }\r\n      )\r\n      if (error) console.error(error)\r\n      if (response.ok) {\r\n        const newStartingYearList = startingYearData.reverse().map(year => ({\r\n          value: year,\r\n          label: `Starting ${year}`\r\n        }))\r\n        updateStartYearList(newStartingYearList)\r\n      }\r\n    },\r\n    [request, response, error, selection, updateStartYearList]\r\n  )\r\n\r\n  const loadFee = useCallback(async () => {\r\n    const feeData = await request.post('/Calculator/GetCourseFee', selection)\r\n    if (error) console.error(error)\r\n    if (response.ok) {\r\n      const fee = feeData[0]\r\n      updateFee(fee)\r\n      if (selection.feeCategory !== 'INTSA') {\r\n        updatePage(PAGES.FEE_PAYING_SUMMARY)\r\n      } else {\r\n        updatePage(PAGES.STUDY_ABOARD_SUMMARY)\r\n      }\r\n    }\r\n  }, [request, response, error, selection, updateFee, updatePage])\r\n\r\n  const loadMajorAndStartingYears = async courseCode => {\r\n    await Promise.all([loadMajor(courseCode), loadStartingYears(courseCode)])\r\n  }\r\n\r\n  const loadMajorFeeAndUnits = async () => {\r\n    await Promise.all([loadMajorFee(), loadUnits()])\r\n    updatePage(PAGES.D_SUMMARY)\r\n  }\r\n\r\n  const changeCourseHandler = event => {\r\n    setSelection(prev => ({ ...prev, courseCode: event?.value }))\r\n    setPressed(false)\r\n    setCourseName(event?.label)\r\n    if (selection.feeCategory === 'DUG' && event?.value) {\r\n      loadMajorAndStartingYears(event.value)\r\n    } else if (\r\n      event?.value &&\r\n      selection.feeCategory[0] !== 'D' &&\r\n      selection.feeCategory !== 'INTSA'\r\n    ) {\r\n      loadStartingYears(event.value)\r\n    }\r\n  }\r\n\r\n  const changeYearHandler = event => {\r\n    setSelection(prev => ({ ...prev, year: `Starting ${event?.value}` }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const changeMajorHandler = event => {\r\n    setSelection(prev => ({ ...prev, majorName: event?.label }))\r\n    setPressed(false)\r\n  }\r\n\r\n  const submitHandler = event => {\r\n    event.preventDefault()\r\n    setPressed(true)\r\n    updateData(selection)\r\n    if (selection.feeCategory[0] !== 'D' || selection.feeCategory === 'DFPG') {\r\n      loadFee()\r\n    } else {\r\n      loadMajorFeeAndUnits()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <h1 style={{ fontWeight: 'bold' }}>Select Your Info:</h1>\r\n      <br />\r\n      <p>Select your course and starting year</p>\r\n      <p>Click &quot;Help&quot; for descriptions.</p>\r\n      <hr style={{ width: '50%', margin: 'auto' }} />\r\n      <br />\r\n      <br />\r\n      {error && 'Error!'}\r\n      {loading && 'Loading...'}\r\n      <form onSubmit={submitHandler}>\r\n        <label htmlFor='course'>Select Your Course:</label>\r\n        <div className='row tbox'>\r\n          <Select\r\n            name='course'\r\n            inputId='course'\r\n            options={courseList}\r\n            isClearable\r\n            placeholder={`eg. ${courseList?.[0]?.label}`}\r\n            onChange={changeCourseHandler}\r\n            isLoading={pressed || loading}\r\n            isDisabled={pressed}\r\n          />\r\n        </div>\r\n        <br />\r\n        <label htmlFor='startyear'>Select Your Starting Year:</label>\r\n        <div className='row tbox'>\r\n          <Select\r\n            name='startyear'\r\n            inputId='startyear'\r\n            options={startYearList}\r\n            isClearable\r\n            placeholder={\r\n              selection.courseCode\r\n                ? `eg. ${startYearList?.[0]?.label}`\r\n                : 'Please select your course first'\r\n            }\r\n            onChange={changeYearHandler}\r\n            isLoading={pressed || loading}\r\n            isDisabled={pressed || loading || !selection.courseCode}\r\n          />\r\n        </div>\r\n        <br />\r\n        {data.feeCategory === 'DUG' && (\r\n          <>\r\n            <label htmlFor='majorSelect'>Select Your Major:</label>\r\n            <div className='row tbox'>\r\n              <Select\r\n                name='majorSelect'\r\n                inputId='majorSelect'\r\n                options={majorList}\r\n                isClearable\r\n                placeholder={\r\n                  majorList?.[0]?.label\r\n                    ? `eg. ${majorList?.[0]?.label}`\r\n                    : 'Please select your course first'\r\n                }\r\n                isLoading={pressed || loading}\r\n                isDisabled={pressed || loading || !selection.courseCode}\r\n                onChange={changeMajorHandler}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n        <br />\r\n        <br />\r\n        <div style={{ overflow: 'auto' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <button\r\n              id='prevBtn'\r\n              type='button'\r\n              onClick={prevPage}\r\n              disabled={!error && (pressed || page !== PAGES.COURSE_AND_YEAR)}\r\n            >\r\n              Previous\r\n            </button>\r\n            <button\r\n              id='nextBtn'\r\n              disabled={\r\n                pressed ||\r\n                page !== PAGES.COURSE_AND_YEAR ||\r\n                loading ||\r\n                (data.feeCategory !== 'DUG'\r\n                  ? !selection.courseCode || !selection.year\r\n                  : !selection.majorName)\r\n              }\r\n              type='submit'\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeeCourseAndYear\r\n"],"sourceRoot":""}